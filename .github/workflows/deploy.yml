name: ðŸš€ Build & Deploy Vite App

on:
  push:
    branches:
      - main

jobs:
  web-deploy:
    name: ðŸŽ‰ Build & Upload
    runs-on: ubuntu-latest
    steps:
    - name: ðŸšš Ambil kode terbaru
      uses: actions/checkout@v4

    - name: ðŸŸ¢ Setup Node.js (Siapkan Dapur)
      uses: actions/setup-node@v4
      with:
        node-version: '18' # Versi Node yang umum dipakai

    - name: ðŸ“¦ Install & Build (Mulai Memasak)
      run: |
        npm install
        npm run build

    - name: ðŸ“‚ Kirim Hasil Masakan ke cPanel
      uses: SamKirkland/FTP-Deploy-Action@v4.3.5
      with:
        server: ${{ secrets.FTP_SERVER }}
        username: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        server-dir: ./      # Upload ke root hosting
        local-dir: ./dist/  # PENTING: Hanya upload folder 'dist' (hasil masakan)
